package com.csei.data;

import com.csei.portcrane.service.SensorDataService;

import java.util.Date;

/**
 * Created with IntelliJ IDEA.
 * User: xiaozhujun
 * Date: 13-11-4
 * Time: 上午10:27
 * To change this template use File | Settings | File Templates.
 */
public class MogoTest {
    public static void main(String args[]){
        long count = 1000000;
        StringBuffer data = new StringBuffer("");
        Date startTime = new Date();
        for (long j=0;j<count;j++){
            for(int i=0;i<2;i++){
                if(i==0){
                    data.append(Math.random()*300);
                }else{
                    data.append(",").append(Math.random()*300);
                }

            }
            String dataObjectJson="{sensors:[{sensorNum:1,dateType:'Vibration',time:'2013-11-05 10:29:24',data:[58,7,8,7,8,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58]},{sensorNum:2,dateType:'Vibration',time:'2013-11-05 10:29:24',data:[58,8,10,8,10,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58]},{sensorNum:3,dateType:'Route',time:'2013-11-05 10:29:24',data:[0.1,0.1]}]}";
            String documentJson = "{sensors:[{sensorNum:'3',dataType:'Route',time:"+new Date().getTime()+",data:["+data+"]}]}";

//            String documentJson = "{sensors:[{sensorNum:'1',dataType:'振动',time:"+new Date().getTime()+",data:[58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,198,202,201,198,195,195,196,183,199,191,180,191,192,177,184,185,175,181,179,174,173,174,172,174,166,171,169,165,167,168,164,166,167,159,160,165,161,159,163,158,157,159,159,155,157,156,158,154,155,156,154,155,156,153,152,154,154,152,151,153,150,151,151,149,148,152,149,148,150,148,149,149,148,149,148,146,149,146,144,147,146,143,147,143,144,146,144,141,146,141,144,145,139,141,142,139,139,140,136,139,137,136,136,136,133,135,133,132,134,132,129,130,128,126,128,126,124,123,122,119,119,116,115,113,110,111,107,102,101,97,96,93,89,86,83,80,76,74,69,67,62,56,55,51,47,44,39,36,32,28,25,21,17,14,11,7,6,0,0,3,5,8,10,13,16,17,20,22,23,26,28,28,32,32,35,36,36,40,40,39,43,43,43,43,46,45,43,46,48,49,48,48,49,48,49,50,49,49,46,49,48,47,47,46,44,44,40,41,41,39,39,37,37,35,35,32,31,31,30,28,27,25,21,22,21,19,18,17,14,14,14,10,9,7,7,5,3,2,0,0,2,3,4,5,7,9,10,12,12,14,16,17,18,21,21,23,24,26,27,29,31,32,33,35,36,37,39,39,43,44,46,47,50,51,53,57,57,58,61,63,64,67,68,70,72,76,77,80,81,85,87,90,91,95,97,100,101,106,108,112,114,119,119,126,125,133,130,141,134,149,138,159,139,168,137,176,135,186,118,199,93,233,5,541,588,679,548,200,228,57,322,38,286,197,63,437,19,264,168,216,189,231,175,198,137,267,196,134,221,204,152,213,185,155,185,192,196,141,161,196,176,141,204,141,155,187,157,148,152\n" +
//                    ",177,151,145,162,148,136,173,148,129,148,155,144,132]}]}";
            SensorDataService sensorDataService = new SensorDataService();
            String result = sensorDataService.saveMessage(documentJson);
            System.out.println(j);
            data.delete(0,data.length());
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
        }
        Date endTime = new Date();
        System.out.println("startTime: "+startTime.getTime());
        System.out.println("endTime: "+endTime.getTime());
        System.out.println("时间差："+(endTime.getTime()-startTime.getTime()));
    }
}
